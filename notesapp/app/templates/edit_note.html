{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='edit_note.css') }}">
{% endblock %}

{% block content %}
<div class="sticky-note-edit">
    <form action="" method="post">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.title.label }}
            {{ form.title(class="form-control", rows=1) }}
            {% for error in form.title.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.note.label }}
            {{ form.note(class="form-control", rows=4) }}
            {% for error in form.note.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
            <button type="button" class="btn btn-secondary" id="cancel-button">Cancel</button>
        </div>
    </form>
</div>

<!-- I almost forgot you can include javascript in html files lol -->
{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var formModified = false;
        var form = document.querySelector('.sticky-note-edit form');
        var cancelButton = document.getElementById('cancel-button');

        form.addEventListener('change', function() {
            formModified = true;
        });

        cancelButton.addEventListener('click', function() {
            if (formModified) {
                var confirmLeave = confirm('You have unsaved changes. Are you sure you want to discard them?');
                if (confirmLeave) {
                    window.location.href = "{{ url_for('index') }}"; // Redirect to the '/' or '/index' route
                }
            } else {
                window.location.href = "{{ url_for('index') }}"; // Redirect if no changes made
            }
        });
    });
</script>
{% endblock %}

{% endblock %}